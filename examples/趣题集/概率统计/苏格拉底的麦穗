> 苏格拉底和弟子们走到一片麦田里，风吹麦浪，阵阵秋意袭来。苏格拉底对弟子们说，“你们从麦田的这一头走到那一头，中间可以拾起一株麦穗，我们看看谁能找到最大的麦穗。” 他接着说 “当然，你们只有一次机会，一旦选定了，之后即便遇到更大的麦穗，也不能再采摘；而且你们也不能回头去采摘那些已经错过的大麦穗。” 弟子们听完之后，面面相觑。

为了拿到最大的麦穗，你会采取什么样的策略呢？当然，按照既定的策略，我们也许不能保证拿到最大的麦穗，但是我们可以使得拿到最大麦穗的概率最大化。也就是说，拿到最大麦穗的概率就是我们的收益。

假设麦田里有n株麦穗，如果我们的策略是随机地选择一株麦穗，那么，我们的收益将是1/n。

那么，有没有一种策略能够比随机选择更好一些呢？

事实上，我们可以对麦穗的大小分布先观察一段时间，通过我们观察到的麦穗分布，我们就有了一些信息为我们接下来的选择提供依据，从而提升拿到最大麦穗的概率。为了说明这种方法，我们考虑一个只有“三株麦穗”的情景。

> 商场里举行抽奖活动，获奖的顾客可以选择在三件礼品里挑一件。刚开始，顾客并不知道这三件礼品是什么。然后，这三件礼品将被工作人员随机逐个展示出来，每件礼品展示出来后，顾客可以选择要这件礼品，也可以pass掉这件礼品。如果顾客选择pass，工作人员将展示下一件礼品，以此类推。那么，使用什么策略，可以让顾客更有可能挑选到价值最高的礼品呢？

我们假设这三件礼品分别是**手套**，**电视**，还有**车子**。显然顾客是想要选到车子的，但是刚开始的时候，顾客并不知道这三件礼品是什么。

让我们来考虑一下以下这种策略：

1. 第一件礼品直接pass掉，仅仅把这件礼品的价值记下来；
2. 第二件礼品如果比第一件礼品贵，则选第二件礼品；
3. 否则，选第三件礼品。

我们知道，三件礼品的出场顺序总共有六种，如果我们采取随机选择策略，我们将有1/3的概率抽到车子。但是，如果我们采取上面的策略，在不同的礼品出场顺序下，我们将得到如下结果：

* 手套 → 电视 → 车子：将会得到**电视**
* 手套 → 车子 → 电视：将会得到**车子**
* 电视 → 手套 → 车子：将会得到**车子**
* 电视 → 车子 → 手套：将会得到**车子**
* 车子 → 手套 → 电视：将会得到**电视**
* 车子 → 电视 → 手套：将会得到**手套**

我们可以看到，有三种排列的情况下，也就是1/2的概率，我们能拿到车子，而只有1/6的概率，我们会拿到手套。这种策略的收益，显然要比随机选择策略要好。因为我们首先对礼品进行了观察，而我们接下来的策略也是基于我们观察到的信息的，所以我们得到更好的结果也就理所当然了。

如果我们把我们的这种策略推广到n件礼品，就变成了和苏格拉底的麦穗一样的问题。我们可以制定类似的策略：

1. 前r株麦穗直接pass掉，仅仅记下r株里面最大麦穗的大小，记作M；
2. 接下来的麦穗如果比M要大，那就选这一株麦穗；
3. 如果到最后更好的麦穗都没有出现，就选择最后一株麦穗。

## 如何选择r

那么，我们应当如何选择首先观察多少麦穗呢？也就是如何确定r呢？如果我们观察了太多，那么我们很有可能会把最大的麦穗给pass掉。如果我们观察的麦穗太少，我们很可能最后会选到一株大小平庸的麦穗。下面我们来计算对于一个确定的r，我们能找到最大麦穗的概率：


$$
\begin{aligned}
\text{P}(r) &  = \sum_{k=r+1}^n{
	\text{P}(
		第 k 个是最大的麦穗的并且被选中
	)
} \\\\
&  = \sum_{k=r+1}^n{
	\text{P}(
		第 k个是最大的麦穗
	)
	\text{P}(
		第k个被选中|第 k个是最大的麦穗
	)
} \\\\
&  = \sum_{k=r+1}^n{
	\frac{1}{n}
	\text{P}(
		前k-1个中的最大的麦穗出现在前r个里
	)
} \\\\
& = \sum_{k=r+1}^n{
	\frac{1}{n} \frac{r}{k-1}
} = \frac{r}{n} \sum_{k=r+1}^{n}{\frac{1}{k-1}}
= \frac{r}{n} \sum_{k=r}^{n-1}{\frac{1}{k}}
\end{aligned}
$$

注意到如果想要选中第k个，要满足

1. k比前面的麦穗都要大，而当k是最大的麦穗时，这一点是显然满足的。
2. 前k-1株麦穗中最大的麦穗在前r株里，否则，这株较大的麦穗就会抢在k之前被选中。

所以我们有上式中的推断：

$$
\text{P}(
		第k个被选中|第 k个是最大的麦穗
) \\\\ =
\text{P}(
		前k-1个中的最大的麦穗出现在前r个里
	)
$$

接下来我们来估算当r变化时，P(r)的最大值。我们考虑将P(r)的表达式近似地连续化，得到：

$$
\newcommand{\ud}{\mathrm{d}}
\begin{aligned}
\text{P}(r) &  = \frac{r}{n} \sum_{k=r}^{n-1}{\frac{1}{k}}  \approx \frac{r}{n} \int_r^n\frac{1}{x} \ud x \\\\
& = \frac{r}{n} (\log(n) - \log(r)) = \frac{r}{n}\log(\frac{n}{r}) \\\\
& = -x\log(x), 其中x=\frac{r}{n}
\end{aligned}
$$


通过求导我们可以知道x=1/e时，P(r)取得最大值1/e。其中e就是自然对数的底，e约等于2.71828。

**因此，在麦田里，当麦穗很多的时候，我们应当首先观察前1/e≈37%的麦穗，然后在接下来的麦穗中选择一株比观察到的所有麦穗还要大的一株麦穗。**这样，我们找到最大麦穗的概率就会接近1/e！当n很大的时候，1/e的收益和随机选择策略得到的1/n的收益相差甚远。

## 结语

现实生活中，以苏格拉底的麦穗为模型的场景有很多，这些场景都可以利用我们今天所讨论的策略。比如我们去买房子或者租房子，事先打算看十套房；我们打算和多个姑娘谈恋爱，而最终只和一个姑娘结婚；我们打算招聘一个会计师，而打算举行六场面试；在炒股的时候我们想低买高卖，如何能够更高概率找到这些最值点等等。

在数学中，苏格拉底的麦穗这个问题的模型是最优停止理论的一个特例。这类问题还有什么应用？是否存在比我们今天讨论的策略更优的策略？有兴趣的朋友可以阅读一下本文的参考文献：[Optimal Stopping and Applications](http://www.math.ucla.edu/~tom/Stopping/Contents.html)

总之，看完苏格拉底的麦穗这个故事，我们明白了一个道理：**千万不要和初恋结婚啊！**
